webpackJsonp([4],{I4t6:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(o("mtWM")),i=n(o("PJh5"));function n(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{login_img:o("iQH9"),ruleForm:{Accesskey:"",Secretkey:""},rules:{Accesskey:[{validator:function(e,t,o){""===t?o(new Error("Please fill in this field.")):o()},trigger:"blur"}],Secretkey:[{validator:function(e,t,o){""===t?o(new Error("Please fill in this field.")):t.length<8?o(new Error("Length cannot be less than 8.")):o()},trigger:"blur"}]},location:"",loginLoad:!1}},computed:{email:function(){return this.$store.state.user.email}},watch:{$route:function(e,t){this.bodyWidth}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var o=t;o.loginLoad=!0;var n=window.location.pathname,s=(n.slice(0,n.indexOf("/",1)),o.data_api+"/minio/webrpc"),a={id:1,jsonrpc:"2.0",method:"web.Login",params:{username:o.ruleForm.Accesskey,password:o.ruleForm.Secretkey}};r.default.post(s,a,{headers:{}}).then(function(e){var t=e.data,r=t.error,n=t.result;if(r)return o.$message.error(r.message),o.loginLoad=!1,!1;(0,i.default)(n.uiVersion).isValid()||o.$message.error("Invalid UI version in the JSON-RPC response"),n.uiVersion,o.loginLoad=!1,sessionStorage.oaxMinioLoginAccessToken=n.token,o.$store.state.user.accessToken=n.token,console.log("login token: ",o.$store.state.user.accessToken),o.$router.replace({name:"minio"}),localStorage.removeItem("MinioAccountNumber"),localStorage.setItem("MinioAccountNumber",JSON.stringify(o.ruleForm))}).catch(function(e){console.log(e),o.loginLoad=!1})})},resetForm:function(e){this.$refs[e].resetFields()}},mounted:function(){this.location=window.location.host}}},K31e:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("I4t6"),i=o.n(r);for(var n in r)"default"!==n&&function(e){o.d(t,e,function(){return r[e]})}(n);var s=o("zjIu");var a=function(e){o("rWga")},l=o("VU/8")(i.a,s.a,!1,a,"data-v-5d3c8d41",null);t.default=l.exports},iQH9:function(e,t,o){e.exports=o.p+"static/img/logo.8d2a080.png"},rWga:function(e,t){},zjIu:function(e,t,o){"use strict";var r={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loginLoad,expression:"loginLoad"}],staticClass:"login"},[o("div",{staticClass:"formContent"},[o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules}},[o("el-form-item",{attrs:{prop:"Accesskey"}},[o("div",{staticClass:"title"},[e._v("Access Key")]),e._v(" "),o("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.ruleForm.Accesskey,callback:function(t){e.$set(e.ruleForm,"Accesskey",t)},expression:"ruleForm.Accesskey"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"Secretkey"}},[o("div",{staticClass:"title"},[e._v("Secret Key")]),e._v(" "),o("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.Secretkey,callback:function(t){e.$set(e.ruleForm,"Secretkey",t)},expression:"ruleForm.Secretkey"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{icon:"iconfont icon-denglutongji"},on:{click:function(t){return e.submitForm("ruleForm")}}})],1)],1)],1),e._v(" "),o("div",{staticClass:"login_bot"},[o("div",{staticClass:"left"},[e._v(e._s(e.location))]),e._v(" "),o("router-link",{staticClass:"right",attrs:{to:"/minio/login"}},[o("img",{attrs:{src:e.login_img}})])],1)])},staticRenderFns:[]};t.a=r}});